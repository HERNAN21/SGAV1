import{o as y}from"./operacionesService-DZShys_E.js";import{T as F,h as m,w as l,r as u,g as _,o as s,b as a,c as p,F as g,i as b,e as M,f as T,E as w}from"./index-DlKmiQXQ.js";const S={__name:"RegistrarNotas",setup(G){const v=_(!1),V=_(null),c=_({evaluaciones:[],cursos:[],estudiantes:[]}),o=_({id_evaluacion:null,id_curso:null,id_estudiante:null,calificacion:11,observaciones:""}),x={id_evaluacion:[{required:!0,message:"Evaluaci贸n requerida",trigger:"change"}],id_curso:[{required:!0,message:"Curso requerido",trigger:"change"}],id_estudiante:[{required:!0,message:"Estudiante requerido",trigger:"change"}],calificacion:[{required:!0,message:"Calificaci贸n requerida",trigger:"change"}]},k=async()=>{const{data:r}=await y.catalogs();c.value=r},q=async()=>{var r,t;await V.value.validate(),v.value=!0;try{await y.registrarNota(o.value),w.success("Nota registrada")}catch(n){w.error(((t=(r=n==null?void 0:n.response)==null?void 0:r.data)==null?void 0:t.message)||"No se pudo registrar la nota")}finally{v.value=!1}};return F(k),(r,t)=>{const n=u("el-option"),f=u("el-select"),i=u("el-form-item"),d=u("el-col"),C=u("el-input-number"),N=u("el-input"),E=u("el-row"),U=u("el-button"),B=u("el-form"),R=u("el-card");return s(),m(R,null,{header:l(()=>[...t[5]||(t[5]=[T("strong",null,"Registrar Notas",-1)])]),default:l(()=>[a(B,{ref_key:"formRef",ref:V,model:o.value,rules:x,"label-position":"top"},{default:l(()=>[a(E,{gutter:12},{default:l(()=>[a(d,{xs:24,md:12},{default:l(()=>[a(i,{label:"Evaluaci贸n",prop:"id_evaluacion"},{default:l(()=>[a(f,{modelValue:o.value.id_evaluacion,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.id_evaluacion=e),style:{width:"100%"}},{default:l(()=>[(s(!0),p(g,null,b(c.value.evaluaciones,e=>(s(),m(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(d,{xs:24,md:12},{default:l(()=>[a(i,{label:"Curso",prop:"id_curso"},{default:l(()=>[a(f,{modelValue:o.value.id_curso,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.id_curso=e),style:{width:"100%"}},{default:l(()=>[(s(!0),p(g,null,b(c.value.cursos,e=>(s(),m(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(d,{xs:24,md:12},{default:l(()=>[a(i,{label:"Estudiante",prop:"id_estudiante"},{default:l(()=>[a(f,{modelValue:o.value.id_estudiante,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.id_estudiante=e),filterable:"",style:{width:"100%"}},{default:l(()=>[(s(!0),p(g,null,b(c.value.estudiantes,e=>(s(),m(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(d,{xs:24,md:12},{default:l(()=>[a(i,{label:"Calificaci贸n",prop:"calificacion"},{default:l(()=>[a(C,{modelValue:o.value.calificacion,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.calificacion=e),min:0,max:20,step:.1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{xs:24},{default:l(()=>[a(i,{label:"Observaciones",prop:"observaciones"},{default:l(()=>[a(N,{modelValue:o.value.observaciones,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.observaciones=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(U,{type:"primary",loading:v.value,onClick:q},{default:l(()=>[...t[6]||(t[6]=[M("Guardar",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})}}};export{S as default};
