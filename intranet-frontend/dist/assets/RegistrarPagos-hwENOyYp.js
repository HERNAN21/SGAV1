import{o as v}from"./operacionesService-DZShys_E.js";import{T,h as b,w as o,r,g as i,o as p,b as e,c as U,F as Y,i as h,e as B,f as F,E as V}from"./index-DlKmiQXQ.js";const j={__name:"RegistrarPagos",setup(N){const m=i(!1),c=i(null),_=i({estudiantes:[]}),t=i({id_estudiante:null,concepto:"",monto:0,fecha_pago:"",medio_pago:"Efectivo",observaciones:""}),y={id_estudiante:[{required:!0,message:"Estudiante requerido",trigger:"change"}],concepto:[{required:!0,message:"Concepto requerido",trigger:"blur"}],monto:[{required:!0,message:"Monto requerido",trigger:"change"}],fecha_pago:[{required:!0,message:"Fecha requerida",trigger:"change"}],medio_pago:[{required:!0,message:"Medio de pago requerido",trigger:"change"}]},w=async()=>{const{data:d}=await v.catalogs();_.value=d},x=async()=>{var d,a;await c.value.validate(),m.value=!0;try{await v.registrarPago(t.value),V.success("Pago registrado")}catch(n){V.error(((a=(d=n==null?void 0:n.response)==null?void 0:d.data)==null?void 0:a.message)||"No se pudo registrar el pago")}finally{m.value=!1}};return T(w),(d,a)=>{const n=r("el-option"),g=r("el-select"),u=r("el-form-item"),s=r("el-col"),f=r("el-input"),q=r("el-input-number"),k=r("el-date-picker"),E=r("el-row"),M=r("el-button"),P=r("el-form"),C=r("el-card");return p(),b(C,null,{header:o(()=>[...a[6]||(a[6]=[F("strong",null,"Registrar Pagos",-1)])]),default:o(()=>[e(P,{ref_key:"formRef",ref:c,model:t.value,rules:y,"label-position":"top"},{default:o(()=>[e(E,{gutter:12},{default:o(()=>[e(s,{xs:24,md:12},{default:o(()=>[e(u,{label:"Estudiante",prop:"id_estudiante"},{default:o(()=>[e(g,{modelValue:t.value.id_estudiante,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value.id_estudiante=l),filterable:"",style:{width:"100%"}},{default:o(()=>[(p(!0),U(Y,null,h(_.value.estudiantes,l=>(p(),b(n,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,md:12},{default:o(()=>[e(u,{label:"Concepto",prop:"concepto"},{default:o(()=>[e(f,{modelValue:t.value.concepto,"onUpdate:modelValue":a[1]||(a[1]=l=>t.value.concepto=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,md:12},{default:o(()=>[e(u,{label:"Monto",prop:"monto"},{default:o(()=>[e(q,{modelValue:t.value.monto,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.monto=l),min:.1,step:10,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,md:12},{default:o(()=>[e(u,{label:"Fecha Pago",prop:"fecha_pago"},{default:o(()=>[e(k,{modelValue:t.value.fecha_pago,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.fecha_pago=l),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,md:12},{default:o(()=>[e(u,{label:"Medio Pago",prop:"medio_pago"},{default:o(()=>[e(g,{modelValue:t.value.medio_pago,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.medio_pago=l),style:{width:"100%"}},{default:o(()=>[e(n,{label:"Efectivo",value:"Efectivo"}),e(n,{label:"Transferencia",value:"Transferencia"}),e(n,{label:"Tarjeta",value:"Tarjeta"}),e(n,{label:"Yape",value:"Yape"}),e(n,{label:"Plin",value:"Plin"}),e(n,{label:"Otro",value:"Otro"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24},{default:o(()=>[e(u,{label:"Observaciones",prop:"observaciones"},{default:o(()=>[e(f,{modelValue:t.value.observaciones,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.observaciones=l),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(M,{type:"primary",loading:m.value,onClick:x},{default:o(()=>[...a[7]||(a[7]=[B("Guardar",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})}}};export{j as default};
